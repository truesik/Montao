<!DOCTYPE html>
<html lang="ru" xmlns:="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/head :: head('Project Stack')"></head>
<body>
<link href="../css/community.css" rel="stylesheet" th:href="@{/css/community.css}">
<!--Channel Creation Modal Dialog-->
<!--<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">-->
    <!--<div class="modal-dialog">-->
        <!--<div class="modal-content">-->
            <!--<div class="modal-header">-->
                <!--<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span-->
                        <!--class="sr-only">Close</span></button>-->
                <!--<h4 class="modal-title" id="myModalLabel" th:text="#{channel.new}">New channel</h4>-->
            <!--</div>-->
            <!--<div class="modal-body">-->
                <!--<form th:action="@{__${#httpServletRequest.requestURI}__/channels/new}" method="post" id="new-channel">-->
                    <!--<div class="form-group">-->
                        <!--<label for="title" th:text="#{channel.title}">Title</label>-->
                        <!--<input type="text" class="form-control" id="title" name="title" placeholder="Title"-->
                               <!--th:placeholder="#{channel.title}">-->
                    <!--</div>-->
                    <!--<div class="form-group">-->
                        <!--<label for="description" th:text="#{channel.description}">Description</label>-->
                        <!--<input type="text" class="form-control" id="description" name="description"-->
                               <!--placeholder="Description"-->
                               <!--th:placeholder="#{channel.description}">-->
                    <!--</div>-->
                <!--</form>-->
            <!--</div>-->
            <!--<div class="modal-footer">-->
                <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
                <!--<button type="submit" class="btn btn-primary" id="create" th:text="#{channel.create}">Create</button>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->
<!--&lt;!&ndash;NAVIGATION BAR&ndash;&gt;-->
<!--<div th:replace="fragments/navbar :: ${#authorization.expression('isAuthenticated()')}? 'signed-navbar' : 'notsigned-navbar'"></div>-->

<!--<div class="container-fluid">-->
    <!--<div class="row">-->
        <!--&lt;!&ndash;SIDEBAR&ndash;&gt;-->
        <!--<div class="col-md-2 sidebar">-->
            <!--<span>Channels </span><a th:if="${subscribed}"-->
                                     <!--class="glyphicon glyphicon-plus" data-toggle="modal" href="#myModal"></a>-->
            <!--<ul class="nav nav-sidebar" id="channelList">-->
                <!--<li th:each="channel : ${channelList}">-->
                    <!--<a href="#" th:href="@{'/' + ${channel.community.title} + '/channels/' + ${channel.title}}"-->
                       <!--th:text="${channel.title}">Channel</a>-->
                <!--</li>-->
            <!--</ul>-->
            <!--<span>Users </span>-->
            <!--<ul class="nav nav-sidebar" id="userList">-->
                <!--<li th:each="user : ${userList}">-->
                    <!--<a href="#" th:text="${user.user.username}">Username</a>-->
                <!--</li>-->
            <!--</ul>-->
        <!--</div>-->
        <!--&lt;!&ndash;CHAT&ndash;&gt;-->
        <!--<div class="col-md-offset-2 col-md-10">-->
            <!--<div class="chat" id="messages">-->
            <!--</div>-->
            <!--<div class="message-input">-->
                <!--<input type="text" autocomplete="false" class="form-control" id="message" name="message"-->
                       <!--onsubmit="return false;"-->
                       <!--th:disabled="${#authorization.expression('!isAuthenticated()')}">-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->
<div id="root">Loading...</div>

<div th:replace="fragments/footer :: bootstrap-scripts"></div>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.min.js"></script>
<script src="//cdn.jsdelivr.net/sockjs/1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.14.0/babel.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.2/react-dom.js"></script>
<script type="text/babel">
    var NavBar = React.createClass({
        render: function () {
            return (
                    <nav className="navbar navbar-inverse navbar-fixed-top">
                        <div className="container-fluid">
                            <div className="navbar-header">
                                <button type="button"
                                        className="navbar-toggle collapsed"
                                        data-toggle="collapse"
                                        data-target="#notsigned-navbar"
                                        aria-expanded="false">
                                    <span className="sr-only">Toggle navigation</span>
                                    <span className="icon-bar"></span>
                                    <span className="icon-bar"></span>
                                    <span className="icon-bar"></span>
                                </button>
                                <a className="navbar-brand" href="/">Montao</a>
                            </div>

                            <div className="collapse navbar-collapse" id="notsigned-navbar">
                                <ul className="nav navbar-nav navbar-right">
                                    <li><a href="/registration" >Sing up</a></li>
                                    <li><a href="/login" >Log in</a></li>
                                </ul>
                            </div>
                        </div>
                    </nav>
            )
        }
    });
    var NewChannelModal = React.createClass({
        render: function () {
            return (
                    <div className="modal fade" id="myModal"
                         tabindex="-1"
                         role="dialog"
                         aria-labelledby="myModalLabel"
                         aria-hidden="true">
                        <div className="modal-dialog">
                            <div className="modal-content">
                                <div className="modal-header">
                                    <button type="button" className="close" data-dismiss="modal">
                                        <span aria-hidden="true">&times;</span>
                                        <span className="sr-only">Close</span>
                                    </button>
                                    <h4 className="modal-title" id="myModalLabel">New channel</h4>
                                </div>
                                <div className="modal-body">
                                    <form action="" method="post" id="new-channel">
                                        <div className="form-group">
                                            <label htmlFor="title">Title</label>
                                            <input type="text"
                                                   className="form-control"
                                                   id="title"
                                                   name="title"
                                                   placeholder="Title" />
                                        </div>
                                        <div className="form-group">
                                            <label htmlFor="description">Description</label>
                                            <input type="text"
                                                   className="form-control"
                                                   id="description"
                                                   name="description"
                                                   placeholder="Description" />
                                        </div>
                                    </form>
                                </div>
                                <div className="modal-footer">
                                    <button type="button" className="btn btn-default" data-dismiss="modal">Close</button>
                                    <button type="submit" className="btn btn-primary" id="create">Create</button>
                                </div>
                            </div>
                        </div>
                    </div>
            )
        }
    });
    var Channel = React.createClass({
        render: function () {
            var channel = this.props.channel;
            return (
                    <li key={channel.id}>
                        <a href={'/' + (channel.community.title) + '/channels/' + (channel.title)}>{channel.title}</a>
                    </li>
            )
        }
    });
    var ChannelList = React.createClass({
        componentDidMount: function() {

        },
        render: function () {
            return (
                    <div>
                        <span>Channels </span>
                        <ul className="nav nav-sidebar" id="channelList">
                            <Channel/>
                        </ul>
                    </div>
            )
        }
    });
    var User = React.createClass({
        render: function () {
            var user = this.props.user;
            return (
                  <li key={user.id}>
                      <a href="#">{user.user.username}</a>
                  </li>
            )
        }
    });
    var UserList = React.createClass({
        render: function () {
            return (
                    <div>
                        <span>Users</span>
                        <ul className="nav nav-sidebar" id="userList"></ul>
                    </div>
            )
        }
    });
    var SideBar = React.createClass({
       render: function () {
           return (
                   <div>
                       <ChannelList/>
                       <UserList/>
                   </div>
           )
       }
    });
    var Message = React.createClass({
        render: function () {
            var message = this.props.message;
            return (
                    <div key={message.id} id={message.id} className="panel panel-danger">
                        <div className="panel-body">
                            <strong>{message.user.username}</strong>
                            <small>{message.receivedTime}</small>
                            <p>{message.message}</p>
                        </div>
                    </div>
            )
        }
    });
    var MessageBox = React.createClass({
        render: function () {
            return (

            )
        }
    });
    var Chat = React.createClass({
        render: function () {
            return (
                    <div className="container-fluid">
                        <div className="row">
                            <div className="col-md-2 sidebar">
                                <SideBar/>
                            </div>
                            <div className="col-md-offset-2 col-md-10">
                                <MessageBox/>
                            </div>
                        </div>
                    </div>
            )
        }
    });
    var App = React.createClass({
        render: function () {
            return (
                    <div>
                        <NavBar/>
                        <Chat/>
                    </div>
            );
        }
    });
    ReactDOM.render(
            <App/>,
            document.getElementById('root')
    );
</script>

<!--<script th:inline="javascript">-->
    <!--/*<![CDATA[*/-->
    <!--var csrf = /*[[${_csrf.token}]]*/ "";-->
    <!--var websocketPath = /*[[@{/websocket}]]*/ "";-->
    <!--/*]]>*/-->
<!--</script>-->
<!--<script th:src="@{/js/chat.js}" src="../js/chat.js"></script>-->
<!--<script th:src="@{/js/new-channel-submit.js}" src="../js/new-channel-submit.js"></script>-->
<!--<script th:src="@{/js/message-submit.js}" src="../js/message-submit.js"></script>-->
</body>
</html>